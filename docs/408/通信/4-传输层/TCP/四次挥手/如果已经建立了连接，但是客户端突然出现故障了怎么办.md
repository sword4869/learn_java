#  如果已经建立了连接，但是客户端突然出现故障了怎么办

socket 接口设置 `SO_KEEPALIVE`, 开启tcp保活机制

​	如果2小时双方都无连接活动，启动保活机制。

​	然后向客户端发送探测报文，

​		客户端宕机：达到探测次数上限后，还无响应，那么服务器断开连接。

​		客户端宕机后重启：探测出非正常连接，客户端发rst，服务器关闭连接

​		客户端正常响应：tcp保活时间重置。



web 服务软件 nginx：

​	keepalive_timeout，定时器60秒内无连接，服务器关闭连接。