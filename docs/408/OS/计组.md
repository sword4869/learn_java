https://www.bilibili.com/video/BV17F411T7Ao?p=38

[3.3  数字编码 * - Hello 算法 (hello-algo.com)](https://www.hello-algo.com/chapter_data_structure/number_encoding)

- 反码为了解决原码中负数加法的问题。
- 补码为解决乘除。


> 原码的问题: 负数加法

(-2) + (1) → (-3)错误，1000 0010 + 0000 0001 → 1000 0011

(-2) - (1) → (-1)错误，1000 0010 - 0000 0001 → 1000 0001

(-2) + (-1) → (3)错误，1000 0010 + 1000 0001 → 0000 0011


> 反码虽然可以负数内加减法，但反码跨0的计算错误


(-2) + (1) = (-1)，1111 1101 + 0000 0001 = 1111 1110

减法就用减法，而不是加负数。不是 (-2) + (-1) → (-4)，1111 1101 + 1111 1110 → 1111 1011，而是 (-2) - (1) = (-3)，1111 1101 - 00000 0001 = 1111 1100

![](https://cdn.jsdelivr.net/gh/sword4869/pic1@main/images/202407112214967.png)

差1，因为有两个0。

![](https://cdn.jsdelivr.net/gh/sword4869/pic1@main/images/202407112214968.png)

## [-128, 127] 多一个

补码：反码+1，相当于复制正0，补上了差的1。负数整体下移1个单位。

![](https://cdn.jsdelivr.net/gh/sword4869/pic1@main/images/202407112214969.png)

所以本该双0的 ±127 变成了 $[-128, 127]$。

## 确认

**数字是以“补码”的形式存储在计算机中的**。



原码的最小负数是`1111 1111`，反码和补码的最小负数都是`1000 0000`

## 转换规则

- **原码**：我们将数字的二进制表示的最高位视为符号位，其中 0 表示正数，1 表示负数，其余位表示数字的值。
- **反码**：正数的反码与其原码相同，负数的反码是对其原码**除符号位外**的所有位取反。
- **补码**：正数的补码与其原码相同，负数的补码是在其**反码的基础上加 1** 

![原码、反码与补码之间的相互转换](https://cdn.jsdelivr.net/gh/sword4869/pic1@main/images/202407121506538.png)

## 历史

原码的问题：

​	负数的加减运算，错误。

​	+0 和 −0 的歧义。



反码的问题：

​	+0 和 −0 的歧义。



补码：

​	只存在一个零

​	 $[-128, 127]$多出一个负数。



## 运算例子

### 反码运算

$$
\begin{aligned}
& 1 + (-2) \newline
& \rightarrow 0000 \; 0001 \; \text{(原码)} + 1000 \; 0010 \; \text{(原码)} \newline
& = 0000 \; 0001 \; \text{(反码)} + 1111  \; 1101 \; \text{(反码)} \newline
& = 1111 \; 1110 \; \text{(反码)} \newline
& = 1000 \; 0001 \; \text{(原码)} \newline
& \rightarrow -1
\end{aligned}
$$

### -0

$$
\begin{aligned}
-0 \rightarrow \; & 1000 \; 0000 \; \text{(原码)} \newline
= \; & 1111 \; 1111 \; \text{(反码)} \newline
= 1 \; & 0000 \; 0000 \; \text{(补码, 溢出)}  = 0000 \; 0000 \; \text{(补码)} \newline
\end{aligned}
$$

### 补码运算

$$
\begin{aligned}
& (-127) + (-1) \newline
& \rightarrow 1111 \; 1111 \; \text{(原码)} + 1000 \; 0001 \; \text{(原码)} \newline
& = 1000 \; 0000 \; \text{(反码)} + 1111  \; 1110 \; \text{(反码)} \newline
& = 1000 \; 0001 \; \text{(补码)} + 1111  \; 1111 \; \text{(补码)} \newline
& = 1 \; 1000 \; 0000 \; \text{(补码,溢出)} \newline
& = 1000 \; 0000 \; \text{(补码)} \newline
& \rightarrow -128
\end{aligned}
$$

### 补码超频 min-1=max

$$
\begin{aligned}
& (-128) + (-1) \newline
& = 1000 \; 0000 \; \text{(补码)} + 1111  \; 1111 \; \text{(补码)} \newline
& = 1 \; 0111  \; 1111 \; \text{(补码,溢出)} \newline
& = 0111 \; 1111 \; \text{(补码)} \newline
& 127
\end{aligned}
$$