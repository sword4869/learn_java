- [OSI 七层模型是什么？](#osi-七层模型是什么)
- [TCP/IP 四层模型是什么？](#tcpip-四层模型是什么)
- [五层模型](#五层模型)
- [TCP和UDP的区别](#tcp和udp的区别)
- [TCP三次握手、四次挥手](#tcp三次握手四次挥手)
- [为什么第四次挥手和第二次挥手不能合并确保数据能够完整传输](#为什么第四次挥手和第二次挥手不能合并确保数据能够完整传输)
- [那四次挥手的服务端不是会有个ack吗？然后再发一个释放连接，那这两次可以合并吗？就是确认报文和释放连接可以同时发送吗？](#那四次挥手的服务端不是会有个ack吗然后再发一个释放连接那这两次可以合并吗就是确认报文和释放连接可以同时发送吗)
- [tcp怎么保证可靠传输？](#tcp怎么保证可靠传输)
- [有其他方法，其他层上的方式保证它可靠吗？比如说在报文上是不是会有些检验之类的](#有其他方法其他层上的方式保证它可靠吗比如说在报文上是不是会有些检验之类的)
- [对于TCP和UDP来说，说一下对于“网络通信不可靠”这句话的理解](#对于tcp和udp来说说一下对于网络通信不可靠这句话的理解)
- [浏览器键入网址全过程](#浏览器键入网址全过程)
- [HTTP协议有哪些特点：](#http协议有哪些特点)
- [http为什么是无状态](#http为什么是无状态)
- [响应状态码](#响应状态码)
- [子网掩码的作用](#子网掩码的作用)
- [RPC了解吗？](#rpc了解吗)
- [10分钟速通计算机网络](#10分钟速通计算机网络)


---
## OSI 七层模型是什么？

- 物理层（RJ45)：透明地址传送比特流
- 数据链路层(mac)：帧编码和误差纠正控制
- 网络层(ip)：路由和寻址
- 传输层(tcp)：为两台主机进程之间的通信提供数据传输服务
- 会话层(session)：管理应用程序之间的会话
- 表示层(html)：数据处理
- 应用层：为计算机用户提供服务

## TCP/IP 四层模型是什么？

- 物理链路层
- 网络层
- 传输层
- 应用层

PS：下两层合并, 上三层合并。

## 五层模型

五层模型用于教学，TCP/IP将底层抽象化了，而理解点对点传输对整个传输过程非常重要，比如，802.3，802.11协议簇（以太网、Wi-Fi）也与TCP/IP有着千丝万缕相辅相成的关系。

所以，将OSI模型和TCP/IP四层模型各自的优点相结合，提出了五层网络模型（即TCP/IP五层模型），它包括了物理层、数据链路层、网络层、传输层和应用层五个层次，更适合现代计算机网络的描述与分析。


## TCP和UDP的区别

## TCP三次握手、四次挥手

当客户端要向服务端发送数据时，需要先建立TCP连接，这个过程被称为“三次握手”。TCP连接的释放需要四次挥手来完成。

三次握手的过程如下：

- 客户端向服务端发送SYN报文，表示客户端请求建立连接。
- 服务端接收到SYN报文后，向客户端发送SYN+ACK报文，表示服务端已经收到请求，并同意建立连接。
- 客户端接收到服务端的SYN+ACK报文后，向服务端发送ACK报文，表示客户端已经收到服务端的确认，连接建立完成。

四次挥手的过程如下：

- 客户端发送FIN报文，表示客户端不再发送数据，请求断开连接。
- 服务端接收到FIN报文后，向客户端发送ACK报文，表示服务端已经接收到客户端的请求，并准备好断开连接。
- 服务端发送FIN报文，表示服务端不再发送数据，请求断开连接。
- 客户端接收到服务端的FIN报文后，向服务端发送ACK报文，表示客户端已经接收到服务端的请求，并断开连接。

需要注意的是，在四次挥手完成后，TCP连接就被彻底关闭了，双方不能再进行数据传输。


## 为什么第四次挥手和第二次挥手不能合并确保数据能够完整传输

按照常理的话，第二次和第三次挥手应该一起回复FIN=1和ACK=1的，但是因为服务器端可能有数据没发完，所以不能也立刻去主动申请关闭，所以要把ACK和FIN分开，再发送FIN报文给主动方，告诉主动方同意关闭连接，所以这里的ACK报文和FIN报文多数情况下都是分开发送的。

## 那四次挥手的服务端不是会有个ack吗？然后再发一个释放连接，那这两次可以合并吗？就是确认报文和释放连接可以同时发送吗？

不可以。因为ACK报文和FIN报文的作用是不同的。ACK报文用于确认客户端发送的FIN报文已经被正确接收，而FIN报文则用于通知客户端服务端已经准备好释放连接。在这两个报文中，ACK报文是必须的，因为客户端需要收到服务端的确认才能确定服务端已经接收到了自己发送的FIN报文。因此，这两个报文不能合并成一个发送。

## tcp怎么保证可靠传输？
-   序号和确认号：TCP通过序号和确认号来保证数据的可靠传输。发送方将每个数据报文都标记一个唯一的序号，接收方收到数据后需要回复一个确认号，表示已经成功接收到了这个数据。
-   超时重传：发送方在发送数据后会设置一个计时器，如果在规定的时间内没有收到确认，则会重新发送数据。这可以保证即使某个数据包在传输过程中丢失，也能够被及时地重传。
-   滑动窗口：TCP通过滑动窗口机制来控制发送方和接收方的数据发送和接收速率。发送方通过滑动窗口机制来控制发送数据的数量和速度，接收方则通过滑动窗口机制来控制接收数据的数量和速度。
-   确认机制：TCP通过确认机制来确保数据的可靠传输。发送方将每个数据报文都标记一个唯一的序号，接收方收到数据后需要回复一个确认号，表示已经成功接收到了这个数据。
-   拥塞控制：TCP通过拥塞控制机制来避免网络拥塞。发送方会根据网络状况和接收方的反馈来调整数据发送的速率，以避免网络拥塞。
## 有其他方法，其他层上的方式保证它可靠吗？比如说在报文上是不是会有些检验之类的

除了TCP本身提供的可靠传输机制之外，还有其他层上的方式可以保证数据的可靠传输。比如在数据链路层和物理层上，常用的技术包括循环冗余校验（CRC）、帧检验序列（FCS）等，用于检测和纠正数据传输中的错误。

在应用层上，常用的方法包括数据重传、数据校验等。例如，HTTP协议通常会在应用层上进行数据重传，以保证数据的可靠传输。另外，应用层协议也可以使用一些校验算法，如MD5、SHA等，来验证数据的完整性，以保证数据在传输过程中不被篡改。

总之，在不同层次上都可以采用不同的技术和机制来保证数据的可靠传输，这些机制相互配合，共同保障了数据的安全和可靠性。

## 对于TCP和UDP来说，说一下对于“网络通信不可靠”这句话的理解

## 浏览器键入网址全过程

## HTTP协议有哪些特点：

* **基于TCP协议: **   面向连接，安全

  > TCP是一种面向连接的(建立连接之前是需要经过三次握手)、可靠的、基于字节流的传输层通信协议，在数据传输方面更安全

* **基于请求-响应模型:**   一次请求对应一次响应（先请求后响应）

  > 请求和响应是一一对应关系，没有请求，就没有响应

* **HTTP协议是无状态协议:**  对于数据没有记忆能力。每次请求-响应都是独立的

  > 无状态指的是客户端发送HTTP请求给服务端之后，服务端根据请求响应数据，响应完后，不会记录任何信息。
  >
  > - 缺点:  多次请求间不能共享数据
  > - 优点:  速度快
  >
  > 请求之间无法共享数据会引发的问题：
  >
  > - 如：京东购物。加入购物车和去购物车结算是两次请求
  > - 由于HTTP协议的无状态特性，加入购物车请求响应结束后，并未记录加入购物车是何商品
  > - 发起去购物车结算的请求后，因为无法获取哪些商品加入了购物车，会导致此次请求无法正确展示数据
  >
  > 具体使用的时候，我们发现京东是可以正常展示数据的，原因是Java早已考虑到这个问题，并提出了使用会话技术(Cookie、Session)来解决这个问题。具体如何来做，我们后面课程中会讲到。

## http为什么是无状态

## 响应状态码

| 状态码分类 | 说明                                                         |
| ---------- | ------------------------------------------------------------ |
| 1xx        | **响应中** --- 临时状态码。表示请求已经接受，告诉客户端应该继续请求或者如果已经完成则忽略 |
| 2xx        | **成功** --- 表示请求已经被成功接收，处理已完成              |
| 3xx        | **重定向** --- 重定向到其它地方，让客户端再发起一个请求以完成整个处理 |
| 4xx        | **客户端错误** --- 处理发生错误，责任在客户端，如：客户端的请求一个不存在的资源，客户端未被授权，禁止访问等 |
| 5xx        | **服务器端错误** --- 处理发生错误，责任在服务端，如：服务端抛出异常，路由出错，HTTP版本不支持等 |

参考: 资料/SpringbootWeb/响应状态码.md

关于响应状态码，我们先主要认识三个状态码，其余的等后期用到了再去掌握：

200 `OK - [GET]`：客户端请求成功。服务器成功返回用户请求的数据，该操作是幂等的（Idempotent）。  
201 `CREATED - [POST/PUT/PATCH]`：用户新建或修改数据成功。  
202 `Accepted - [*]`：表示一个请求已经进入后台排队（异步任务）  
204 `NO CONTENT - [DELETE]`：用户删除数据成功。  
400 `INVALID REQUEST - [POST/PUT/PATCH]`：用户发出的请求有错误，服务器没有进行新建或修改数据的操作，该操作是幂等的。  
401 `Unauthorized - [*]`：表示用户没有权限（令牌、用户名、密码错误）。  
403 `Forbidden - [*]` 表示用户得到授权（与401错误相对），但是访问是被禁止的。  
404 `NOT FOUND - [*]`：请求资源不存在。用户发出的请求针对的是不存在的记录，服务器没有进行操作，该操作是幂等的。  
406 `Not Acceptable - [GET]`：用户请求的格式不可得（比如用户请求JSON格式，但是只有XML格式）。  
410 `Gone -[GET]`：用户请求的资源被永久删除，且不会再得到的。  
422 `Unprocesable entity - [POST/PUT/PATCH]` 当创建一个对象时，发生一个验证错误。  
500 `INTERNAL SERVER ERROR - [*]`：服务器发生错误，用户将无法判断发出的请求是否成功。

## 子网掩码的作用

子网掩码是用于划分网络地址和主机地址的一个32位二进制数。

它与IP地址结合使用，用于确定一个IP地址中哪些位表示网络地址，哪些位表示主机地址。

子网掩码的作用主要有两个方面：

- 确定网络地址：子网掩码通过将IP地址中的网络部分与主机部分进行分隔，将网络地址和主机地址进行划分。子网掩码中的1表示网络部分，0表示主机部分。通过与IP地址进行逻辑与运算，可以得到网络地址。
- 确定主机地址范围：子网掩码中的0表示主机部分，确定了主机地址的范围。主机地址范围是指在同一个网络中可以分配给主机的不同IP地址。子网掩码中主机部分的位数决定了主机地址的数量，可以根据主机地址范围来分配IP地址给不同的主机。

子网掩码的正确配置对于网络通信的正常运行非常重要。它可以帮助路由器和交换机等网络设备正确地识别网络地址和主机地址，实现数据的正确传输和路由。

## RPC了解吗？

RPC（Remote Procedure Call，远程过程调用）。

RPC是一种通信协议，用于不同计算机之间的远程通信。它允许一个计算机程序调用另一个计算机上的函数或方法，就像调用本地函数一样，隐藏了底层网络通信的细节。

在RPC中，通信的两端分别是客户端和服务器。客户端发起一个远程调用请求，服务器接收请求并执行相应的操作，然后将结果返回给客户端。RPC框架负责处理底层的网络通信、序列化和反序列化等细节，使得远程调用过程对开发者透明。

常见的RPC框架包括Dubbo、gRPC、Thrift等。

RPC的优点包括：

-   简化分布式系统开发：RPC隐藏了底层通信细节，使得开发者可以像调用本地函数一样调用远程函数，简化了分布式系统的开发。
-   提高系统性能：RPC可以将计算任务分布到不同的服务器上，充分利用资源，提高系统的并发性和性能。
-   提高系统可扩展性：通过RPC，可以将系统拆分成多个服务，每个服务可以独立部署和扩展，提高系统的可扩展性。
-   

## [10分钟速通计算机网络](https://www.bilibili.com/video/BV1jx421X7zH/)

- 两台计算机可以通过一条网线，但多条计算机两两连接，太费线。
- 集线器hub：啥也没有
- 交换机switch：mac地址表
- 路由器router：路由表 ip 


【集线器Hub】

广播隐私性较差
半双工

【交换机Switch】

实现点对点连接。交换机记录设备的唯一标识——MAC地址，交换机将每个设备的MAC地址与对应端口记录为一张地址表。

全双工通讯

桥接。一根线连接两台交换机，实现两个交换机设备的相互访问；两台交换器有一个端口记录为桥接端口，交换两台交换机的MAC地址表；

只能用在设备不多的内网，例如公司内网或学校教育网。虽然可以记录几千到几万个MAC地址，并且【桥接】只能增加新的MAC地址记录；交换机越多，通过桥接的传播路径也会越长

【路由器Router（并非家里的WiFi路由器）】

一种专门的网络设备，用于找到网络的最优路径；

连接两个不同的交换机Switch组成的网络并分配【网段】（例如网络A分配192.168.1.0/24，网络B分配192.168.2.0/24，连接到路由器的192.168.1.1和192.168.2.1端口，设备A1和设备B1分配192.168.1.10和192.168.2.10）

【默认网关IP】不同网段连接到路由器的IP；

【IP地址】设备A1给设备B1发数据包，在网络A内找目标IP，找不到就会发送到路由器；

【路由表】记录IP和端口映射关系的路由表（一说网关）；来决定如何将数据包转发到网络B，在网络B中找到对应设备B1的MAC地址；最终的通信还是需要靠MAC地址完成；