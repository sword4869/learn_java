- [跨域问题](#跨域问题)
- [如何用消息队列做削峰填谷的？](#如何用消息队列做削峰填谷的)

---
## 跨域问题

跨域问题：**浏览器**禁止请求的发起者与服务端发生跨域**ajax**请求，请求**被浏览器拦截**的问题。

8800 Browser-----ajax----->Server 10010

条件：域名相同、或端口不同

解决：CORS

> 为什么后端的远程调用 RestTemplate, feign 不会遇到跨域问题?

因为跨域问题，是浏览器拦截请求。所以和后端无关。

## 如何用消息队列做削峰填谷的？

使用消息队列可以有效地实现削峰填谷的目标，具体的实现方式如下：

1.  创建消息队列：选择合适的消息队列系统，如RabbitMQ、Kafka等，并创建相应的消息队列。
2.  发送消息：将需要处理的任务或请求转化为消息，并发送到消息队列中。这些消息可以包含任务的相关信息，如任务类型、参数等。
3.  消费消息：编写消费者程序，从消息队列中获取消息，并进行相应的处理。消费者可以根据业务需求进行扩展，可以是单个消费者或多个消费者。
4.  控制消费速率：通过控制消费者的数量和处理速度，来控制任务的处理速度。可以动态调整消费者的数量，根据实际情况增加或减少消费者的数量。
5.  峰值处理：当任务量激增时，消息队列可以暂时存储大量的消息，而不会导致系统负载过高。消费者按照自身的处理能力逐步消费消息，避免了系统的峰值压力。
6.  谷值填充：当任务量减少时，消息队列中的消息可以被逐步消费，保证系统的资源得到充分利用，避免了资源的浪费。
7.  异步处理：通过消息队列的异步特性，可以将任务的处理与请求的接收解耦。请求可以快速响应，而任务的处理可以在后台进行，提高系统的响应速度和吞吐量。

通过使用消息队列进行削峰填谷，可以平滑处理系统的高峰期和低谷期，提高系统的稳定性和可伸缩性。同时，消息队列还可以提供消息持久化、消息重试等功能，增加系统的可靠性和容错性。