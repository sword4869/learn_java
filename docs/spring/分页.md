## 4. 分页插件pagehelper

在Mapper中我们只需要进行正常的列表查询即可。

在Service层中，调用Mapper的方法之前设置分页参数，在调用Mapper方法执行查询之后，解析分页结果，并将结果封装到PageBean对象中返回。

1. 在pom.xml引入依赖

    ```xml
    <dependency>
        <groupId>com.github.pagehelper</groupId>
        <artifactId>pagehelper-spring-boot-starter</artifactId>
        <version>1.4.2</version>
    </dependency>
    ```



2. EmpMapper


    ```java
    @Mapper
    public interface EmpMapper {
        //获取当前页的结果列表
        @Select("select * from emp")
        public List<Emp> page(Integer start, Integer pageSize);
    }
    ```

3. EmpServiceImpl

    ~~~java
    @Data
    @NoArgsConstructor
    @AllArgsConstructor
    public class PageBean {
        private Long total; //总记录数
        private List rows; //当前页数据列表
    }
    ~~~
    ```java
    @Override
    public PageBean page(Integer page, Integer pageSize) {
        // 设置分页参数
        PageHelper.startPage(page, pageSize); 
        // 执行分页查询
        List<Emp> empList = empMapper.list(name,gender,begin,end); 
        // 获取分页结果
        Page<Emp> p = (Page<Emp>) empList;   
        // 封装PageBean
        PageBean pageBean = new PageBean(p.getTotal(), p.getResult()); 
        return pageBean;
    }
    ```